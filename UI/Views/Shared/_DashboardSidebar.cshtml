<div class="new-dashboard-sidebar">
    <!-- Sidebar Header -->
    <div class="new-sidebar-header">
        <a href="/" class="new-sidebar-brand">
            <div class="new-brand-logo">
                <div class="auth-indicator"></div>
            </div>
            <div class="new-brand-text">
                <h2>Cinema City</h2>
                <p>Admin Panel</p>
            </div>
        </a>
    </div>

    <!-- Sidebar Navigation -->
    <div class="new-sidebar-nav">
        <!-- Tổng quan Section -->
        <div class="new-nav-section">
            <div class="new-nav-section-title">TỔNG QUAN</div>
            
            <div class="new-nav-item">
                <a href="@Url.Action("AdminDashboard", "Dashboard")" 
                   class="new-nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "AdminDashboard" ? "active" : "")">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
            </div>
            
            <div class="new-nav-item">
                <a href="/" class="new-nav-link">
                    <i class="fas fa-home"></i>
                    <span>Trang chủ</span>
                </a>
            </div>
        </div>

        <!-- Quản lý Section -->
        <div class="new-nav-section">
            <div class="new-nav-section-title">QUẢN LÝ</div>
            
            <div class="new-nav-item">
                <a href="@Url.Action("Index", "Movies", new { area = "MovieManagement" })" 
                   class="new-nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Movies" ? "active" : "")">
                    <i class="fas fa-film"></i>
                    <span>Quản lý phim</span>
                </a>
            </div>

            <!-- Dropdown cho Quản lý đặt vé -->
            <div class="new-nav-item has-dropdown">
                <a href="#" class="new-nav-link dropdown-toggle 
                   @(ViewContext.RouteData.Values["Area"]?.ToString() == "BookingManagement" ? "active" : "")" 
                   data-bs-toggle="dropdown">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Quản lý đặt vé</span>
                </a>
                <div class="new-nav-dropdown @(ViewContext.RouteData.Values["Area"]?.ToString() == "BookingManagement" ? "show" : "")">
                    <a href="@Url.Action("Index", "BookingTicket", new { area = "BookingManagement" })" 
                       class="new-nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "Index" && ViewContext.RouteData.Values["Area"]?.ToString() == "BookingManagement" ? "active" : "")">
                        <i class="fas fa-plus"></i>
                        <span>Đặt vé mới</span>
                    </a>
                    <a href="@Url.Action("BookingList", "BookingTicket", new { area = "BookingManagement" })" 
                       class="new-nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "BookingList" ? "active" : "")">
                        <i class="fas fa-list"></i>
                        <span>Danh sách đặt vé</span>
                    </a>
                </div>
            </div>

            <div class="new-nav-item">
                <a href="@Url.Action("Index", "Showtimes", new { area = "ShowtimeManagement" })" 
                   class="new-nav-link @(ViewContext.RouteData.Values["Area"]?.ToString() == "ShowtimeManagement" ? "active" : "")">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Quản lý lịch chiếu</span>
                </a>
            </div>

            <div class="new-nav-item">
                <a href="@Url.Action("Index", "Promotions", new { area = "PromotionManagement" })" 
                   class="new-nav-link @(ViewContext.RouteData.Values["Area"]?.ToString() == "PromotionManagement" ? "active" : "")">
                    <i class="fas fa-gift"></i>
                    <span>Quản lý khuyến mãi</span>
                </a>
            </div>

            <div class="new-nav-item">
                <a href="@Url.Action("Index", "Members", new { area = "UserManagement" })" 
                   class="new-nav-link @(ViewContext.RouteData.Values["Area"]?.ToString() == "UserManagement" ? "active" : "")">
                    <i class="fas fa-users"></i>
                    <span>Quản lý người dùng</span>
                </a>
            </div>
        </div>

        <!-- Hệ thống Section -->
        <div class="new-nav-section">
            <div class="new-nav-section-title">HỆ THỐNG</div>
            
            <div class="new-nav-item">
                <a href="#" class="new-nav-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Báo cáo</span>
                </a>
            </div>
            
            <div class="new-nav-item">
                <a href="#" class="new-nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Cài đặt</span>
                </a>
            </div>
        </div>
    </div>

    <!-- User Profile Section -->
    <div class="new-sidebar-user">
        <div class="new-user-profile">
            <div class="new-user-avatar">
                @if (User.Identity?.IsAuthenticated == true)
                {
                    <text>@(User.Identity?.Name?.Substring(0, 1).ToUpper())</text>
                }
                else
                {
                    <text>A</text>
                }
            </div>
            <div class="new-user-info">
                <h4>@(User.Identity?.IsAuthenticated == true ? User.Identity?.Name : "admin")</h4>
                <p>@(User.IsInRole("Admin") ? "Administrator" : User.IsInRole("Staff") ? "Staff" : "User")</p>
            </div>
        </div>
        
        <div class="new-user-actions">
            @if (User.Identity?.IsAuthenticated == true)
            {
                <a href="@Url.Action("Profile", "Account", new { area = "UserManagement" })" class="new-user-action-btn">
                    <i class="fas fa-user"></i>
                </a>
                <form asp-controller="Account" asp-action="Logout" asp-area="" method="post" class="d-inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="new-user-action-btn" style="border: none; background: rgba(255, 255, 255, 0.1);">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </form>
            }
            else
            {
                <a href="@Url.Action("Login", "Account", new { area = "" })" class="new-user-action-btn">
                    <i class="fas fa-sign-in-alt"></i>
                </a>
            }
        </div>
    </div>
</div> 

<!-- Dashboard Sidebar Script -->
<script src="~/js/dashboard-sidebar.js"></script> 